{% extends 'emails/base_email.html' %}

{% block title %}Order Confirmation - #{{ order.order_number }}{% endblock %}

{% block header %}Order Confirmation{% endblock %}

{% block content %}
    <h2>Thank you for your order!</h2>
    
    <p>Hi {% if order.user %}{{ order.user.first_name|default:order.user.username }}{% else %}Customer{% endif %},</p>
    
    <p>We've received your order and it's being processed. Here are the details:</p>
    
    <div class="order-details">
        <h3>Order #{{ order.order_number }}</h3>
        <p><strong>Order Date:</strong> {{ order.created_at|date:"F d, Y" }}</p>
        <p><strong>Status:</strong> <span class="status-badge">{{ order.get_status_display }}</span></p>
        
        <h4>Items Ordered:</h4>
        {% for item in order_items %}
        <div class="order-item">
            <strong>{{ item.product_name }}</strong><br>
            Quantity: {{ item.quantity }}<br>
            Unit Price: ₹{{ item.unit_price }}<br>
            Total: ₹{{ item.total_price }}
            {% if item.product_options %}
                <br><small>Options: 
                {% for key, value in item.product_options.items %}
                    {{ key|title }}: {{ value }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
                </small>
            {% endif %}
        </div>
        {% endfor %}
        
        <div class="order-item total-row">
            <strong>Total Amount: ₹{{ order.total_amount }}</strong>
        </div>
    </div>
    
    <div class="contact-info">
        <h4>Shipping Address:</h4>
        {% if order.shipping_address %}
            {{ order.shipping_address.full_name }}<br>
            {{ order.shipping_address.address_line_1 }}<br>
            {% if order.shipping_address.address_line_2 %}{{ order.shipping_address.address_line_2 }}<br>{% endif %}
            {{ order.shipping_address.city }}, {{ order.shipping_address.state }} {{ order.shipping_address.pincode }}
        {% endif %}
    </div>
    
    <p>
        <strong>What's Next?</strong><br>
        • We'll review your order and design files<br>
        • You'll receive updates as your order progresses<br>
        • Estimated delivery: {{ order.estimated_delivery|date:"F d, Y"|default:"3-5 business days" }}
    </p>
    
    <p style="text-align: center;">
        <a href="{{ site_url }}/orders/{{ order.order_number }}/" class="btn">Track Your Order</a>
    </p>
    
    <p>If you have any questions about your order, please contact us at {{ support_email }} or reply to this email.</p>
    
    <p>Thank you for choosing {{ site_name }}!</p>
{% endblock %}